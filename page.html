<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title></title>
  <link href='https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap' rel='stylesheet'>
  <style>
    html {
      height: 100%;
    }

    body {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      margin: 5vmin;
      display: flex;
      flex-direction: column;
      gap: 5vmin;
      font-family: Roboto;
    }

    #top {
      display: flex;
      flex-direction: row;
      align-items: center;
      text-align: center;
    }

    #title {
      flex: 1;
      font-size: 6vh;
      font-weight: 500;
    }

    #feu {
      height: 20vh;
    }

    #cont {
      flex: 1;
      display: flex;
      overflow: hidden;
      text-align: center;
      align-items: center;
      justify-content: center;
      border: solid #2980b9 1vmin;
      border-radius: 5vmin;
      padding: 5vmin;
      gap: 5vmin;
    }

    #qrcode {
      flex: 1;
      object-fit: contain;
      image-rendering: pixelated;
      max-width: 100%;
      max-height: 100%;
    }

    /*============= Loader =============*/

    .lds-ring div {
      box-sizing: border-box;
      display: block;
      width: 64px;
      height: 64px;
      scale: 3;
      margin: 8px;
      border: 5px solid #000;
      border-radius: 50%;
      animation: lds-ring 1.5s cubic-bezier(0.5, 0, 0.5, 1) infinite;
      border-color: #000 transparent transparent transparent;
    }

    .lds-ring div:nth-child(1) {
      position: absolute;
      animation-delay: -0.45s;
    }

    .lds-ring div:nth-child(2) {
      position: absolute;
      animation-delay: -0.3s;
    }

    .lds-ring div:nth-child(3) {
      position: absolute;
      animation-delay: -0.15s;
    }

    @keyframes lds-ring {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <div id="top"><span id="title"></span><svg id="feu" viewBox="0 0 43.394152 118.07931" version="1.1" id="svg5" xmlns="http://www.w3.org/2000/svg"
    xmlns:svg="http://www.w3.org/2000/svg">
    <defs id="defs2">
      <marker id="Arrow2Sstart" orient="auto" refX="0" refY="0" style="overflow:visible">
        <path d="M 8.72,4.03 -2.21,0.02 8.72,-4 c -1.75,2.37 -1.74,5.62 0,8.03 z" id="Arrow2SstartPath"
          style="fill:#000000;fill-opacity:1;stroke:none" transform="matrix(0.3,0,0,0.3,-0.69,0)" />
      </marker>
      <marker id="Arrow2Send" orient="auto" refX="0" refY="0" style="overflow:visible">
        <path d="M 8.72,4.03 -2.21,0.02 8.72,-4 c -1.75,2.37 -1.74,5.62 0,8.03 z" id="Arrow2SendPath"
          style="fill:#000000;fill-opacity:1;stroke:none" transform="matrix(-0.3,0,0,-0.3,0.69,0)" />
      </marker>
    </defs>
    <g id="layer1" transform="translate(-236.75289,-7.0945531)">
      <path
        style="fill:#222;fill-opacity:1;stroke:#000000;stroke-width:0.127465;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
        id="rect846" width="43.266689" height="117.95184" x="236.81662" y="7.1582856"
        d="m 243.81662,7.1582856 h 29.26669 a 7,7 45 0 1 7,7.0000004 V 118.11013 a 7,7 135 0 1 -7,7 h -29.26669 a 7,7 45 0 1 -7,-7 V 14.158286 a 7,7 135 0 1 7,-7.0000004 z" />
      <circle style="fill:#000;fill-opacity:1;" cx="258.44995" cy="28.127312" r="16.843273" />
      <circle style="fill:#000;fill-opacity:1;" cx="258.44995" cy="66.134178" r="16.843273" />
      <circle style="fill:#000;fill-opacity:1;" cx="258.44995" cy="104.14104" r="16.843273" />
      <circle style="fill:#c0392b;fill-opacity:0.0;" id="cc-r" cx="258.44995" cy="28.127312" r="16.843273" />
      <circle style="fill:#f39c12;fill-opacity:0.0;" id="cc-o" cx="258.44995" cy="66.134178" r="16.843273" />
      <circle style="fill:#27ae60;fill-opacity:0.0;" id="cc-g" cx="258.44995" cy="104.14104" r="16.843273" />
      <g aria-label="BUS" id="bus-g"
        style="fill:#27ae60;fill-opacity:0.0;font-weight:bold;font-size:16.5201px;line-height:1.25;font-family:Falena;-inkscape-font-specification:'Falena, Bold';stroke-width:0.413002"
        transform="translate(0.13232498,38.006826)">
        <path id="path879" style="stroke-width:0.413001"
          d="m 246.86766,60.346703 h -2.3797 v 11.567252 h 2.3797 V 69.80039 66.775252 64.928336 62.468021 Z" />
        <path id="path1632" style="stroke-width:1.56095"
          d="m 934.04297,228.08203 v 8.01758 h 6.18945 c 1.58536,0 2.83538,0.43657 3.75,1.31055 0.91462,0.85364 1.3711,1.97142 1.3711,3.35351 0,1.42275 -0.45648,2.55145 -1.3711,3.38477 -0.91462,0.83332 -2.16464,1.25 -3.75,1.25 h -6.18945 v 6.98047 h 6.85937 c 1.58534,0 2.95867,0.47832 4.11719,1.43359 1.17884,0.95527 1.76758,2.37736 1.76758,4.26758 0,1.86989 -0.58874,3.29393 -1.76758,4.26953 -1.15852,0.9756 -2.53185,1.46289 -4.11719,1.46289 h -6.85937 v 7.98828 h 7.98828 c 4.36986,0 7.76297,-1.11777 10.18164,-3.35351 2.41867,-2.23575 3.62891,-5.28475 3.62891,-9.14649 0,-1.78859 -0.27543,-3.39366 -0.82422,-4.8164 -0.54876,-1.44308 -1.23896,-2.5628 -2.07227,-3.35547 -0.813,-0.79268 -1.50317,-1.37048 -2.07226,-1.73633 -0.54879,-0.38616 -1.09773,-0.6815 -1.64649,-0.88477 3.45525,-1.95119 5.18164,-4.92958 5.18164,-8.93359 0,-3.29264 -1.19929,-6.02641 -3.59765,-8.20117 -2.39834,-2.19509 -5.76065,-3.29102 -10.08985,-3.29102 z"
          transform="scale(0.26458333)" />
        <path
          d="m 260.60322,60.34653 h 2.37961 v 7.929325 q 0,1.621357 -1.2019,2.750661 -1.19384,1.121237 -3.06526,1.121237 -1.86335,0 -3.06525,-1.121237 -1.19384,-1.129304 -1.19384,-2.750661 V 60.34653 h 2.37961 v 7.751863 q 0,0.838911 0.51625,1.379364 0.52432,0.532386 1.36323,0.532386 0.84698,0 1.36323,-0.532386 0.52432,-0.540453 0.52432,-1.379364 z"
          id="path881" />
        <path
          d="m 272.14632,68.525915 q 0.0323,1.532626 -1.00831,2.581265 -1.04057,1.040573 -2.88779,1.040573 -1.78268,0 -2.82326,-0.976041 -1.04057,-0.976041 -1.0567,-2.363471 h 2.307 q 0.0645,0.532386 0.50012,0.871177 0.44366,0.330725 1.07284,0.330725 0.70985,0 1.12124,-0.419456 0.41139,-0.419456 0.37912,-1.008307 -0.0323,-0.596918 -0.56465,-1.02444 -0.52432,-0.435588 -1.26643,-0.734047 -0.74212,-0.298459 -1.48423,-0.669516 -0.74211,-0.371057 -1.26643,-1.048639 -0.51626,-0.677582 -0.54046,-1.653623 -0.0161,-1.621358 1.03251,-2.476402 1.05671,-0.855044 2.63773,-0.855044 1.57296,0 2.55707,0.846978 0.99217,0.838911 1.11317,2.403803 h -2.29894 q -0.0968,-0.532386 -0.45172,-0.830845 -0.35493,-0.306525 -0.90345,-0.306525 -0.59691,0 -0.9599,0.330725 -0.36299,0.330724 -0.34686,0.838911 0.0161,0.564652 0.53238,0.976041 0.52432,0.411389 1.26644,0.725981 0.75018,0.314592 1.50036,0.693715 0.75018,0.379124 1.2745,1.072839 0.53238,0.693715 0.56465,1.653623 z"
          id="path883" />
      </g>
      <g aria-label="BUS" id="bus-r"
        style="fill:#c0392b;fill-opacity:0.0;font-weight:bold;font-size:16.5201px;line-height:1.25;font-family:Falena;-inkscape-font-specification:'Falena, Bold';stroke-width:0.413002"
        transform="translate(0.13232498,-38.006899)">
        <path id="path1715" style="stroke-width:0.413001"
          d="m 246.86766,60.346703 h -2.3797 v 11.567252 h 2.3797 V 69.80039 66.775252 64.928336 62.468021 Z" />
        <path id="path1717" style="stroke-width:1.56095"
          d="m 934.04297,228.08203 v 8.01758 h 6.18945 c 1.58536,0 2.83538,0.43657 3.75,1.31055 0.91462,0.85364 1.3711,1.97142 1.3711,3.35351 0,1.42275 -0.45648,2.55145 -1.3711,3.38477 -0.91462,0.83332 -2.16464,1.25 -3.75,1.25 h -6.18945 v 6.98047 h 6.85937 c 1.58534,0 2.95867,0.47832 4.11719,1.43359 1.17884,0.95527 1.76758,2.37736 1.76758,4.26758 0,1.86989 -0.58874,3.29393 -1.76758,4.26953 -1.15852,0.9756 -2.53185,1.46289 -4.11719,1.46289 h -6.85937 v 7.98828 h 7.98828 c 4.36986,0 7.76297,-1.11777 10.18164,-3.35351 2.41867,-2.23575 3.62891,-5.28475 3.62891,-9.14649 0,-1.78859 -0.27543,-3.39366 -0.82422,-4.8164 -0.54876,-1.44308 -1.23896,-2.5628 -2.07227,-3.35547 -0.813,-0.79268 -1.50317,-1.37048 -2.07226,-1.73633 -0.54879,-0.38616 -1.09773,-0.6815 -1.64649,-0.88477 3.45525,-1.95119 5.18164,-4.92958 5.18164,-8.93359 0,-3.29264 -1.19929,-6.02641 -3.59765,-8.20117 -2.39834,-2.19509 -5.76065,-3.29102 -10.08985,-3.29102 z"
          transform="scale(0.26458333)" />
        <path
          d="m 260.60322,60.34653 h 2.37961 v 7.929325 q 0,1.621357 -1.2019,2.750661 -1.19384,1.121237 -3.06526,1.121237 -1.86335,0 -3.06525,-1.121237 -1.19384,-1.129304 -1.19384,-2.750661 V 60.34653 h 2.37961 v 7.751863 q 0,0.838911 0.51625,1.379364 0.52432,0.532386 1.36323,0.532386 0.84698,0 1.36323,-0.532386 0.52432,-0.540453 0.52432,-1.379364 z"
          id="path1719" />
        <path
          d="m 272.14632,68.525915 q 0.0323,1.532626 -1.00831,2.581265 -1.04057,1.040573 -2.88779,1.040573 -1.78268,0 -2.82326,-0.976041 -1.04057,-0.976041 -1.0567,-2.363471 h 2.307 q 0.0645,0.532386 0.50012,0.871177 0.44366,0.330725 1.07284,0.330725 0.70985,0 1.12124,-0.419456 0.41139,-0.419456 0.37912,-1.008307 -0.0323,-0.596918 -0.56465,-1.02444 -0.52432,-0.435588 -1.26643,-0.734047 -0.74212,-0.298459 -1.48423,-0.669516 -0.74211,-0.371057 -1.26643,-1.048639 -0.51626,-0.677582 -0.54046,-1.653623 -0.0161,-1.621358 1.03251,-2.476402 1.05671,-0.855044 2.63773,-0.855044 1.57296,0 2.55707,0.846978 0.99217,0.838911 1.11317,2.403803 h -2.29894 q -0.0968,-0.532386 -0.45172,-0.830845 -0.35493,-0.306525 -0.90345,-0.306525 -0.59691,0 -0.9599,0.330725 -0.36299,0.330724 -0.34686,0.838911 0.0161,0.564652 0.53238,0.976041 0.52432,0.411389 1.26644,0.725981 0.75018,0.314592 1.50036,0.693715 0.75018,0.379124 1.2745,1.072839 0.53238,0.693715 0.56465,1.653623 z"
          id="path1721" />
      </g>
      <g aria-label="BUS" id="bus-o"
        style="fill:#f39c12;fill-opacity:0.0;font-weight:bold;font-size:16.5201px;line-height:1.25;font-family:Falena;-inkscape-font-specification:'Falena, Bold';stroke-width:0.413002"
        transform="translate(0.13233833)">
        <path id="path1725" style="stroke-width:0.413001"
          d="m 246.86766,60.346703 h -2.3797 v 11.567252 h 2.3797 V 69.80039 66.775252 64.928336 62.468021 Z" />
        <path id="path1727" style="stroke-width:1.56095"
          d="m 934.04297,228.08203 v 8.01758 h 6.18945 c 1.58536,0 2.83538,0.43657 3.75,1.31055 0.91462,0.85364 1.3711,1.97142 1.3711,3.35351 0,1.42275 -0.45648,2.55145 -1.3711,3.38477 -0.91462,0.83332 -2.16464,1.25 -3.75,1.25 h -6.18945 v 6.98047 h 6.85937 c 1.58534,0 2.95867,0.47832 4.11719,1.43359 1.17884,0.95527 1.76758,2.37736 1.76758,4.26758 0,1.86989 -0.58874,3.29393 -1.76758,4.26953 -1.15852,0.9756 -2.53185,1.46289 -4.11719,1.46289 h -6.85937 v 7.98828 h 7.98828 c 4.36986,0 7.76297,-1.11777 10.18164,-3.35351 2.41867,-2.23575 3.62891,-5.28475 3.62891,-9.14649 0,-1.78859 -0.27543,-3.39366 -0.82422,-4.8164 -0.54876,-1.44308 -1.23896,-2.5628 -2.07227,-3.35547 -0.813,-0.79268 -1.50317,-1.37048 -2.07226,-1.73633 -0.54879,-0.38616 -1.09773,-0.6815 -1.64649,-0.88477 3.45525,-1.95119 5.18164,-4.92958 5.18164,-8.93359 0,-3.29264 -1.19929,-6.02641 -3.59765,-8.20117 -2.39834,-2.19509 -5.76065,-3.29102 -10.08985,-3.29102 z"
          transform="scale(0.26458333)" />
        <path
          d="m 260.60322,60.34653 h 2.37961 v 7.929325 q 0,1.621357 -1.2019,2.750661 -1.19384,1.121237 -3.06526,1.121237 -1.86335,0 -3.06525,-1.121237 -1.19384,-1.129304 -1.19384,-2.750661 V 60.34653 h 2.37961 v 7.751863 q 0,0.838911 0.51625,1.379364 0.52432,0.532386 1.36323,0.532386 0.84698,0 1.36323,-0.532386 0.52432,-0.540453 0.52432,-1.379364 z"
          id="path1729" />
        <path
          d="m 272.14632,68.525915 q 0.0323,1.532626 -1.00831,2.581265 -1.04057,1.040573 -2.88779,1.040573 -1.78268,0 -2.82326,-0.976041 -1.04057,-0.976041 -1.0567,-2.363471 h 2.307 q 0.0645,0.532386 0.50012,0.871177 0.44366,0.330725 1.07284,0.330725 0.70985,0 1.12124,-0.419456 0.41139,-0.419456 0.37912,-1.008307 -0.0323,-0.596918 -0.56465,-1.02444 -0.52432,-0.435588 -1.26643,-0.734047 -0.74212,-0.298459 -1.48423,-0.669516 -0.74211,-0.371057 -1.26643,-1.048639 -0.51626,-0.677582 -0.54046,-1.653623 -0.0161,-1.621358 1.03251,-2.476402 1.05671,-0.855044 2.63773,-0.855044 1.57296,0 2.55707,0.846978 0.99217,0.838911 1.11317,2.403803 h -2.29894 q -0.0968,-0.532386 -0.45172,-0.830845 -0.35493,-0.306525 -0.90345,-0.306525 -0.59691,0 -0.9599,0.330725 -0.36299,0.330724 -0.34686,0.838911 0.0161,0.564652 0.53238,0.976041 0.52432,0.411389 1.26644,0.725981 0.75018,0.314592 1.50036,0.693715 0.75018,0.379124 1.2745,1.072839 0.53238,0.693715 0.56465,1.653623 z"
          id="path1731" />
      </g>
    </g>
  </svg></div>
  <div id="cont">
  </div>
</body>

<script>
  let cont = document.getElementById('cont')
  let thune = document.getElementById('thune')
  let bus = { $bus };
  let started = false
  if (bus) {
    var feu_r = document.getElementById('bus-r')
    var feu_o = document.getElementById('bus-o')
    var feu_g = document.getElementById('bus-g')
  } else {
    var feu_r = document.getElementById('cc-r')
    var feu_o = document.getElementById('cc-o')
    var feu_g = document.getElementById('cc-g')
  }
  function setContDirection() {
    let b = cont.getBoundingClientRect()
    cont.style.flexDirection = b.height < b.width ? 'row' : 'column'
  }
  window.onresize = setContDirection
  setContDirection()
  let socket = new WebSocket('{ $url }')
  socket.onmessage = e => {
    let r = JSON.parse(e.data)
    switch (r.msg) {
      case 'qr':
        if (r.data == "null") {
          cont.innerHTML = '<span style="font-size: 250%;">error during qr code generation<br>maybe incorrect username or password ?</span>'
        } else {
          title.innerHTML = r.data.name
          cont.innerHTML = '<span style="font-size: 6vh; font-weight: 500;">' + r.data.thune + '</span><img id="qrcode" src="' + r.data.qr + '"/>'
        }
        break
      case 'feu':
        feu_r.style.fillOpacity = r.data == 'r' ? 1 : 0.1
        feu_o.style.fillOpacity = r.data == 'o' ? 1 : 0.1
        feu_g.style.fillOpacity = r.data == 'g' ? 1 : 0.1
        if (!started) {
          cont.innerHTML = '<div class="lds-ring"><div></div><div></div><div></div><div></div></div>'
        }
        started = true
        break
    }
  }
</script>

</html>
